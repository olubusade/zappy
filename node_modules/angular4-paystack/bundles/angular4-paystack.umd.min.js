!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular4-paystack",["exports","@angular/core","@angular/common"],e):e((t=t||self)["angular4-paystack"]={},t.ng.core,t.ng.common)}(this,(function(t,e,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function a(t,e,n,a){return new(n||(n=Promise))((function(o,r){function i(t){try{p(a.next(t))}catch(t){r(t)}}function s(t){try{p(a.throw(t))}catch(t){r(t)}}function p(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(i,s)}p((a=a.apply(t,e||[])).next())}))}function o(t,e){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=e.call(t,i)}catch(t){r=[6,t],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}function r(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var a,o,r=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(t){o={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function i(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t}var s=new e.InjectionToken("paystack.publickey");var p=function(){function t(t){this.token=t}return t.prototype.loadScript=function(){return new Promise((function(t){if(window.PaystackPop&&"function"==typeof window.PaystackPop.setup)t();else{var e=window.document.createElement("script");window.document.head.appendChild(e);var n=function(){e.removeEventListener("load",n),t()};e.addEventListener("load",n),e.setAttribute("src","https://js.paystack.co/v1/inline.js")}}))},t.prototype.checkInput=function(t){return t.key||this.token?t.email?t.amount?t.ref?"":"ANGULAR-PAYSTACK: Paystack ref cannot be empty":"ANGULAR-PAYSTACK: Paystack amount cannot be empty":"ANGULAR-PAYSTACK: Paystack email cannot be empty":"ANGULAR-PAYSTACK: Please insert a your public key"},t.prototype.getPaystackOptions=function(t){return{key:t.key||this.token,email:t.email,amount:t.amount,ref:t.ref,metadata:t.metadata||{},currency:t.currency||"NGN",plan:t.plan||"",channels:t.channels,quantity:t.quantity||"",subaccount:t.subaccount||"",transaction_charge:t.transaction_charge||0,bearer:t.bearer||""}},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:String,decorators:[{type:e.Inject,args:[s]}]}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(s))},token:t,providedIn:"root"}),t}();var c=function(){function t(t){this.paystackService=t,this.paymentInit=new e.EventEmitter,this.onClose=new e.EventEmitter,this.callback=new e.EventEmitter,this.isPaying=!1}return t.prototype.pay=function(){return a(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t="",this.paystackOptions&&Object.keys(this.paystackOptions).length>=2?(t=this.valdateInput(this.paystackOptions),this.generateOptions(this.paystackOptions)):(t=this.valdateInput(this),this.generateOptions(this)),t?(console.error(t),[2,t]):[4,this.paystackService.loadScript()];case 1:return e.sent(),this.isPaying?[2]:(this.paymentInit.observers.length&&this.paymentInit.emit(),window.PaystackPop.setup(this._paystackOptions).openIframe(),this.isPaying=!0,[2])}}))}))},t.prototype.valdateInput=function(t){return this.callback.observers.length?this.paystackService.checkInput(t):"ANGULAR-PAYSTACK: Insert a callback output like so (callback)='PaymentComplete($event)' to check payment status"},t.prototype.generateOptions=function(t){var e=this;this._paystackOptions=this.paystackService.getPaystackOptions(t),this._paystackOptions.onClose=function(){e.onClose.observers.length&&e.onClose.emit()},this._paystackOptions.callback=function(){for(var t,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];(t=e.callback).emit.apply(t,i(n))}},t.decorators=[{type:e.Component,args:[{selector:"angular4-paystack",template:'<button [ngClass]="class" [ngStyle]="style" (click)="pay()"><ng-content></ng-content></button>'}]}],t.ctorParameters=function(){return[{type:p}]},t.propDecorators={key:[{type:e.Input}],email:[{type:e.Input}],amount:[{type:e.Input}],metadata:[{type:e.Input}],ref:[{type:e.Input}],currency:[{type:e.Input}],plan:[{type:e.Input}],quantity:[{type:e.Input}],channels:[{type:e.Input}],subaccount:[{type:e.Input}],transaction_charge:[{type:e.Input}],bearer:[{type:e.Input}],class:[{type:e.Input}],style:[{type:e.Input}],paystackOptions:[{type:e.Input}],paymentInit:[{type:e.Output}],onClose:[{type:e.Output}],callback:[{type:e.Output}]},t}();var u=function(){function t(t){this.paystackService=t,this.paymentInit=new e.EventEmitter,this.onClose=new e.EventEmitter,this.callback=new e.EventEmitter,this.isPaying=!1}return t.prototype.pay=function(){return a(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t="",this.paystackOptions&&Object.keys(this.paystackOptions).length>=2?(t=this.valdateInput(this.paystackOptions),this.generateOptions(this.paystackOptions)):(t=this.valdateInput(this),this.generateOptions(this)),t?(console.error(t),[2,t]):[4,this.paystackService.loadScript()];case 1:return e.sent(),this.isPaying?[2]:(this.paymentInit.observers.length&&this.paymentInit.emit(),window.PaystackPop.setup(this._paystackOptions).openIframe(),this.isPaying=!0,[2])}}))}))},t.prototype.valdateInput=function(t){return this.callback.observers.length?this.paystackService.checkInput(t):"ANGULAR-PAYSTACK: Insert a callback output like so (callback)='PaymentComplete($event)' to check payment status"},t.prototype.generateOptions=function(t){var e=this;this._paystackOptions=this.paystackService.getPaystackOptions(t),this._paystackOptions.onClose=function(){e.onClose.observers.length&&e.onClose.emit()},this._paystackOptions.callback=function(){for(var t,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];(t=e.callback).emit.apply(t,i(n))}},t.prototype.buttonClick=function(){return a(this,void 0,void 0,(function(){return o(this,(function(t){return this.pay(),[2]}))}))},t.decorators=[{type:e.Directive,args:[{selector:"[angular4-paystack]"}]}],t.ctorParameters=function(){return[{type:p}]},t.propDecorators={key:[{type:e.Input}],email:[{type:e.Input}],amount:[{type:e.Input}],metadata:[{type:e.Input}],ref:[{type:e.Input}],currency:[{type:e.Input}],plan:[{type:e.Input}],quantity:[{type:e.Input}],subaccount:[{type:e.Input}],channels:[{type:e.Input}],transaction_charge:[{type:e.Input}],bearer:[{type:e.Input}],class:[{type:e.Input}],style:[{type:e.Input}],paystackOptions:[{type:e.Input}],paymentInit:[{type:e.Output}],onClose:[{type:e.Output}],callback:[{type:e.Output}],buttonClick:[{type:e.HostListener,args:["click"]}]},t}();var y=function(){function t(t){this.paystackService=t,this.paymentInit=new e.EventEmitter,this.onClose=new e.EventEmitter,this.callback=new e.EventEmitter}return t.prototype.pay=function(){return a(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t="",this.paystackOptions&&Object.keys(this.paystackOptions).length>=2?(t=this.valdateInput(this.paystackOptions),this.generateOptions(this.paystackOptions)):(t=this.valdateInput(this),this.generateOptions(this)),t?(console.error(t),[2,t]):[4,this.paystackService.loadScript()];case 1:return e.sent(),this.paymentInit.observers.length&&this.paymentInit.emit(),window.PaystackPop.setup(this._paystackOptions).openIframe(),[2]}}))}))},t.prototype.valdateInput=function(t){return this.callback.observers.length?this.paystackService.checkInput(t):"ANGULAR-PAYSTACK: Insert a callback output like so (callback)='PaymentComplete($event)' to check payment status"},t.prototype.generateOptions=function(t){var e=this;this._paystackOptions=this.paystackService.getPaystackOptions(t),this._paystackOptions.onClose=function(){e.onClose.observers.length&&e.onClose.emit()},this._paystackOptions.callback=function(){for(var t,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];(t=e.callback).emit.apply(t,i(n))}},t.prototype.ngOnInit=function(){return a(this,void 0,void 0,(function(){return o(this,(function(t){return console.error("ANGULAR-PAYSTACK: The paystack embed option is deprecated. Please use the paystack component or directive"),this.pay(),[2]}))}))},t.decorators=[{type:e.Component,args:[{selector:"angular4-paystack-embed",changeDetection:e.ChangeDetectionStrategy.OnPush,template:'<div id="paystackEmbedContainer"></div>'}]}],t.ctorParameters=function(){return[{type:p}]},t.propDecorators={key:[{type:e.Input}],email:[{type:e.Input}],amount:[{type:e.Input}],metadata:[{type:e.Input}],channels:[{type:e.Input}],ref:[{type:e.Input}],currency:[{type:e.Input}],plan:[{type:e.Input}],quantity:[{type:e.Input}],subaccount:[{type:e.Input}],transaction_charge:[{type:e.Input}],bearer:[{type:e.Input}],paystackOptions:[{type:e.Input}],paymentInit:[{type:e.Output}],onClose:[{type:e.Output}],callback:[{type:e.Output}]},t}();var l=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[p,{provide:s,useValue:e}]}},t.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule],exports:[c,u,y],declarations:[c,u,y],providers:[]}]}],t}();t.Angular4PaystackComponent=c,t.Angular4PaystackDirective=u,t.Angular4PaystackEmbedComponent=y,t.Angular4PaystackModule=l,t.ɵa=p,t.ɵb=s,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angular4-paystack.umd.min.js.map