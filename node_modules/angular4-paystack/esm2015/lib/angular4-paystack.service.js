/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, Inject } from '@angular/core';
import { PUBLIC_KEY_TOKEN } from './paystack-token';
import * as i0 from "@angular/core";
import * as i1 from "./paystack-token";
/**
 * @record
 */
function MyWindow() { }
if (false) {
    /** @type {?} */
    MyWindow.prototype.PaystackPop;
}
export class Angular4PaystackService {
    /**
     * @param {?} token
     */
    constructor(token) {
        this.token = token;
    }
    /**
     * @return {?}
     */
    loadScript() {
        return new Promise((/**
         * @param {?} resolve
         * @return {?}
         */
        resolve => {
            if (window.PaystackPop && typeof window.PaystackPop.setup === 'function') {
                resolve();
                return;
            }
            /** @type {?} */
            const script = window.document.createElement('script');
            window.document.head.appendChild(script);
            /** @type {?} */
            const onLoadFunc = (/**
             * @return {?}
             */
            () => {
                script.removeEventListener('load', onLoadFunc);
                resolve();
            });
            script.addEventListener('load', onLoadFunc);
            script.setAttribute('src', 'https://js.paystack.co/v1/inline.js');
        }));
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    checkInput(obj) {
        if (!obj.key && !this.token) {
            return 'ANGULAR-PAYSTACK: Please insert a your public key';
        }
        if (!obj.email) {
            return 'ANGULAR-PAYSTACK: Paystack email cannot be empty';
        }
        if (!obj.amount) {
            return 'ANGULAR-PAYSTACK: Paystack amount cannot be empty';
        }
        if (!obj.ref) {
            return 'ANGULAR-PAYSTACK: Paystack ref cannot be empty';
        }
        return '';
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    getPaystackOptions(obj) {
        /** @type {?} */
        const paystackOptions = {
            key: obj.key || this.token,
            email: obj.email,
            amount: obj.amount,
            ref: obj.ref,
            metadata: obj.metadata || {},
            currency: obj.currency || 'NGN',
            plan: obj.plan || '',
            channels: obj.channels,
            quantity: obj.quantity || '',
            subaccount: obj.subaccount || '',
            transaction_charge: obj.transaction_charge || 0,
            // tslint:disable-line
            bearer: obj.bearer || '',
        };
        return paystackOptions;
    }
}
Angular4PaystackService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root',
            },] }
];
/** @nocollapse */
Angular4PaystackService.ctorParameters = () => [
    { type: String, decorators: [{ type: Inject, args: [PUBLIC_KEY_TOKEN,] }] }
];
/** @nocollapse */ Angular4PaystackService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function Angular4PaystackService_Factory() { return new Angular4PaystackService(i0.ɵɵinject(i1.PUBLIC_KEY_TOKEN)); }, token: Angular4PaystackService, providedIn: "root" });
if (false) {
    /**
     * @type {?}
     * @private
     */
    Angular4PaystackService.prototype.token;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhcjQtcGF5c3RhY2suc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2FuZ3VsYXI0LXBheXN0YWNrLyIsInNvdXJjZXMiOlsibGliL2FuZ3VsYXI0LXBheXN0YWNrLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25ELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGtCQUFrQixDQUFDOzs7Ozs7QUFHcEQsdUJBSUM7OztJQUhDLCtCQUVFOztBQU9KLE1BQU0sT0FBTyx1QkFBdUI7Ozs7SUFDbEMsWUFBOEMsS0FBYTtRQUFiLFVBQUssR0FBTCxLQUFLLENBQVE7SUFBRyxDQUFDOzs7O0lBRS9ELFVBQVU7UUFDUixPQUFPLElBQUksT0FBTzs7OztRQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQzNCLElBQUksTUFBTSxDQUFDLFdBQVcsSUFBSSxPQUFPLE1BQU0sQ0FBQyxXQUFXLENBQUMsS0FBSyxLQUFLLFVBQVUsRUFBRTtnQkFDeEUsT0FBTyxFQUFFLENBQUM7Z0JBQ1YsT0FBTzthQUNSOztrQkFDSyxNQUFNLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDO1lBQ3RELE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7a0JBQ25DLFVBQVU7OztZQUFHLEdBQUcsRUFBRTtnQkFDdEIsTUFBTSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsQ0FBQztnQkFDL0MsT0FBTyxFQUFFLENBQUM7WUFDWixDQUFDLENBQUE7WUFDRCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQzVDLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLHFDQUFxQyxDQUFDLENBQUM7UUFDcEUsQ0FBQyxFQUFDLENBQUM7SUFDTCxDQUFDOzs7OztJQUVELFVBQVUsQ0FBQyxHQUE2QjtRQUN0QyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDM0IsT0FBTyxtREFBbUQsQ0FBQztTQUM1RDtRQUNELElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFO1lBQ2QsT0FBTyxrREFBa0QsQ0FBQztTQUMzRDtRQUNELElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFO1lBQ2YsT0FBTyxtREFBbUQsQ0FBQztTQUM1RDtRQUNELElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFO1lBQ1osT0FBTyxnREFBZ0QsQ0FBQztTQUN6RDtRQUNELE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQzs7Ozs7SUFFRCxrQkFBa0IsQ0FBQyxHQUFvQjs7Y0FDL0IsZUFBZSxHQUFvQjtZQUN2QyxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsSUFBSSxJQUFJLENBQUMsS0FBSztZQUMxQixLQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUs7WUFDaEIsTUFBTSxFQUFFLEdBQUcsQ0FBQyxNQUFNO1lBQ2xCLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRztZQUNaLFFBQVEsRUFBRSxHQUFHLENBQUMsUUFBUSxJQUFJLEVBQUU7WUFDNUIsUUFBUSxFQUFFLEdBQUcsQ0FBQyxRQUFRLElBQUksS0FBSztZQUMvQixJQUFJLEVBQUUsR0FBRyxDQUFDLElBQUksSUFBSSxFQUFFO1lBQ3BCLFFBQVEsRUFBRSxHQUFHLENBQUMsUUFBUTtZQUN0QixRQUFRLEVBQUUsR0FBRyxDQUFDLFFBQVEsSUFBSSxFQUFFO1lBQzVCLFVBQVUsRUFBRSxHQUFHLENBQUMsVUFBVSxJQUFJLEVBQUU7WUFDaEMsa0JBQWtCLEVBQUUsR0FBRyxDQUFDLGtCQUFrQixJQUFJLENBQUM7O1lBQy9DLE1BQU0sRUFBRSxHQUFHLENBQUMsTUFBTSxJQUFJLEVBQUU7U0FDekI7UUFDRCxPQUFPLGVBQWUsQ0FBQztJQUN6QixDQUFDOzs7WUF2REYsVUFBVSxTQUFDO2dCQUNWLFVBQVUsRUFBRSxNQUFNO2FBQ25COzs7O3lDQUVjLE1BQU0sU0FBQyxnQkFBZ0I7Ozs7Ozs7O0lBQXhCLHdDQUErQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIEluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUFVCTElDX0tFWV9UT0tFTiB9IGZyb20gJy4vcGF5c3RhY2stdG9rZW4nO1xuaW1wb3J0IHsgUGF5c3RhY2tPcHRpb25zIH0gZnJvbSAnLi9wYXlzdGFjay1vcHRpb25zJztcblxuaW50ZXJmYWNlIE15V2luZG93IGV4dGVuZHMgV2luZG93IHtcbiAgUGF5c3RhY2tQb3A6IHtcbiAgICBzZXR1cChvcHRpb25zOiBQYXJ0aWFsPFBheXN0YWNrT3B0aW9ucz4pOiB7IG9wZW5JZnJhbWUoKTogYW55IH1cbiAgfTtcbn1cbmRlY2xhcmUgdmFyIHdpbmRvdzogTXlXaW5kb3c7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxufSlcbmV4cG9ydCBjbGFzcyBBbmd1bGFyNFBheXN0YWNrU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKEBJbmplY3QoUFVCTElDX0tFWV9UT0tFTikgcHJpdmF0ZSB0b2tlbjogc3RyaW5nKSB7fVxuXG4gIGxvYWRTY3JpcHQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgaWYgKHdpbmRvdy5QYXlzdGFja1BvcCAmJiB0eXBlb2Ygd2luZG93LlBheXN0YWNrUG9wLnNldHVwID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qgc2NyaXB0ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgd2luZG93LmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgIGNvbnN0IG9uTG9hZEZ1bmMgPSAoKSA9PiB7XG4gICAgICAgIHNjcmlwdC5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgb25Mb2FkRnVuYyk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH07XG4gICAgICBzY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9uTG9hZEZ1bmMpO1xuICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2h0dHBzOi8vanMucGF5c3RhY2suY28vdjEvaW5saW5lLmpzJyk7XG4gICAgfSk7XG4gIH1cblxuICBjaGVja0lucHV0KG9iajogUGFydGlhbDxQYXlzdGFja09wdGlvbnM+KTogc3RyaW5nIHtcbiAgICBpZiAoIW9iai5rZXkgJiYgIXRoaXMudG9rZW4pIHtcbiAgICAgIHJldHVybiAnQU5HVUxBUi1QQVlTVEFDSzogUGxlYXNlIGluc2VydCBhIHlvdXIgcHVibGljIGtleSc7XG4gICAgfVxuICAgIGlmICghb2JqLmVtYWlsKSB7XG4gICAgICByZXR1cm4gJ0FOR1VMQVItUEFZU1RBQ0s6IFBheXN0YWNrIGVtYWlsIGNhbm5vdCBiZSBlbXB0eSc7XG4gICAgfVxuICAgIGlmICghb2JqLmFtb3VudCkge1xuICAgICAgcmV0dXJuICdBTkdVTEFSLVBBWVNUQUNLOiBQYXlzdGFjayBhbW91bnQgY2Fubm90IGJlIGVtcHR5JztcbiAgICB9XG4gICAgaWYgKCFvYmoucmVmKSB7XG4gICAgICByZXR1cm4gJ0FOR1VMQVItUEFZU1RBQ0s6IFBheXN0YWNrIHJlZiBjYW5ub3QgYmUgZW1wdHknO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBnZXRQYXlzdGFja09wdGlvbnMob2JqOiBQYXlzdGFja09wdGlvbnMpOiBQYXlzdGFja09wdGlvbnMge1xuICAgIGNvbnN0IHBheXN0YWNrT3B0aW9uczogUGF5c3RhY2tPcHRpb25zID0ge1xuICAgICAga2V5OiBvYmoua2V5IHx8IHRoaXMudG9rZW4sXG4gICAgICBlbWFpbDogb2JqLmVtYWlsLFxuICAgICAgYW1vdW50OiBvYmouYW1vdW50LFxuICAgICAgcmVmOiBvYmoucmVmLFxuICAgICAgbWV0YWRhdGE6IG9iai5tZXRhZGF0YSB8fCB7fSxcbiAgICAgIGN1cnJlbmN5OiBvYmouY3VycmVuY3kgfHwgJ05HTicsXG4gICAgICBwbGFuOiBvYmoucGxhbiB8fCAnJyxcbiAgICAgIGNoYW5uZWxzOiBvYmouY2hhbm5lbHMsXG4gICAgICBxdWFudGl0eTogb2JqLnF1YW50aXR5IHx8ICcnLFxuICAgICAgc3ViYWNjb3VudDogb2JqLnN1YmFjY291bnQgfHwgJycsXG4gICAgICB0cmFuc2FjdGlvbl9jaGFyZ2U6IG9iai50cmFuc2FjdGlvbl9jaGFyZ2UgfHwgMCwgLy8gdHNsaW50OmRpc2FibGUtbGluZVxuICAgICAgYmVhcmVyOiBvYmouYmVhcmVyIHx8ICcnLFxuICAgIH07XG4gICAgcmV0dXJuIHBheXN0YWNrT3B0aW9ucztcbiAgfVxuXG59XG4iXX0=